<!--
 * @Author: Anixuil
 * @Date: 2024-12-10 11:01:25
 * @LastEditors: Anixuil
 * @LastEditTime: 2024-12-25 14:24:21
 * @Description: åœ£è¯å¿«ä¹
-->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- å›¾æ ‡ -->
    <link rel="icon" href="./åœ£è¯-åœ£è¯æ ‘.svg" type="image/x-icon">
    <title>Merry Christmas - åœ£è¯å¿«ä¹</title>
    <link rel="stylesheet" href="index.css">
    <script src="./vue.min.js"></script>
    <script src="https://unpkg.com/pinyin-pro"></script>
</head>

<body>
    <div class="container">
        <!-- <img src="./github-icon.png" class="github-icon" @click="github"/> -->
        <div class="tree-wrapper" v-if="startFlag">
            <div class="tree">
                <!-- --å¼€å¤´çš„å±æ€§æ˜¯CSSçš„è‡ªå®šä¹‰å±æ€§ï¼Œå¯é€šè¿‡varå‡½æ•°å¯¹å…¶è°ƒç”¨ -->
                <div class="tree-light" v-for="(item,index) in 50"
                    :style="{'--appear':index,'--y':2*index,'--rotate':1440-28.8*index,'--radius':12.5-0.25*index,'--speed':index*0.1,'--delay':index*0.05}">
                </div>
                <!-- æ˜Ÿæ˜Ÿ -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 113.32 108.44" class="tree-star"
                    style="--delay:50;">
                    <path
                        d="M90.19 104.33L57.12 87.38 24.4 105l5.91-36.69L3.44 42.65l36.72-5.72 16.1-33.5L73.06 36.6l36.83 4.97-26.35 26.21z"
                        fill="none" stroke-width="6.88" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </div>
        </div>
        <div class="text-wrapper">
            <div class="text-zh">
                <span class="text">åœ£è¯å¿«ä¹, å‘¨åŒå­¦</span>
            </div>
            <div class="text-en">
                <span class="text">
                    Merry Christmas
                </span>
            </div>
            <div v-show="!startFlag && oneFlag" class="start-btn" @click="getZF">ç­¾æ”¶ç¥ç¦</div>
        </div>
        <div class="footer-wrapper">
            <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="320" height="65"
                src="https://i.y.qq.com/n2/m/outchain/player/index.html?songid=1630706&songtype=0"></iframe> -->
            <audio id="audio" src="./2024åœ£è¯.mp3" autoplay loop></audio>
        </div>
        <!-- å¤‡æ¡ˆ æ¹˜ICPå¤‡2022024189å·-1 å¯ä»¥è·³è½¬åˆ°å·¥ä¿¡éƒ¨-->
        <!-- <div class="beian">
            <a href="https://beian.miit.gov.cn/#/Integrated/recordQuery" target="_blank">æ¹˜ICPå¤‡2022024189å·-1</a>
        </div> -->
    </div>
</body>
<script>
    new Vue({
        el: '.container',
        data: {
            tree: 50,
            startFlag: false,   // å¼€å§‹æ ‡å¿—
            oneFlag: false,      // ä¸€é˜¶æ®µæ ‡å¿—
        },
        mounted() {
            setInterval(this.createSnowflake, 10);
            this.$nextTick(() => {
                // æ‹¿åˆ°åœ°å€æ ä¸Šçš„?name=xxxä¸­xxxçš„å‚æ•°
                const url = window.location.href;
                let name = url.split('?name=')[1];
                if (name) {
                    let { pinyin } = pinyinPro;
                    // å¯¹nameè¿›è¡Œurlè§£ç 
                    name = decodeURIComponent(name);
                    // å°†ä¸­æ–‡åè½¬æ¢ä¸ºæ‹¼éŸ³
                    let enName = pinyin(name, {
                        style: pinyin.STYLE_NORMAL, // è®¾ç½®æ‹¼éŸ³é£æ ¼
                        heteronym: false, // è®¾ç½®å¤šéŸ³å­—æ˜¯å¦å±•ç¤º
                        toneType: 'none', // è®¾ç½®å£°è°ƒé£æ ¼
                    });
                    // å°†æ‹¼éŸ³å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸² å¹¶é¦–å­—æ¯å¤§å†™
                    enName = enName.split(' ').map(item => item[0].toUpperCase() + item.slice(1)).join('');
                    // å¦‚æœenNameé‡ŒåŒ…å«æœ‰Ã¼ï¼Œå°†Ã¼è½¬æ¢ä¸ºv
                    enName = enName.replace(/Ã¼/g, 'v');
                    switch (enName) {
                        case "LiuLi":
                            enName = 'Callidora';
                            break;
                        case "XianNv":
                            enName = 'Fairy';
                            break;
                    }
                    document.querySelector('.text-zh > .text').innerHTML = name + 'ï¼Œåœ£è¯å¿«ä¹';
                    document.querySelector('.text-en > .text').innerHTML = 'Merry Christmas to ' + enName;
                }
                setTimeout(() => {
                    this.oneFlag = true;
                }, 2200);
            })
        },
        methods: {
            createSnowflake() {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.style.left = `${Math.random() * window.innerWidth}px`;
                snowflake.style.width = `${Math.random() * 10 + 3}px`;
                snowflake.style.fontSize = `${Math.random() * 10 + 5}px`;
                snowflake.style.height = snowflake.style.width;
                snowflake.style.animationDuration = `${Math.random() * 3 + 10}s`;
                // ç­¾æ”¶ç¥ç¦åï¼Œç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œ1/5çš„æ¦‚ç‡æ˜¯ğŸï¼Œ2/5çš„æ¦‚ç‡æ˜¯â„ï¸ï¼Œ1/5çš„æ¦‚ç‡æ˜¯ğŸï¼Œ1/5çš„æ¦‚ç‡æ˜¯ğŸ’µï¼Œç­¾æ”¶å‰å…¨æ˜¯â„ï¸
                const random = Math.random();
                if (this.startFlag) {
                    if (random < 0.2) {
                        snowflake.innerHTML = 'ğŸ';
                    } else if (random < 0.4) {
                        snowflake.innerHTML = 'â„ï¸';
                    } else if (random < 0.6) {
                        snowflake.innerHTML = 'ğŸ';
                    } else if (random < 0.8) {
                        snowflake.innerHTML = 'ğŸ’µ';
                    } else {
                        snowflake.innerHTML = 'â„ï¸';
                    }
                } else {
                    snowflake.innerHTML = 'â„ï¸';
                }
                document.body.appendChild(snowflake);

                setTimeout(() => {
                    // ç»™å½“å‰çš„é›ªèŠ±æ·»åŠ ç›‘å¬ï¼Œè¶…å‡ºå±å¹•ååˆ é™¤dom
                    document.body.removeChild(snowflake);
                }, 5000);
            },
            getZF() {
                this.$nextTick(() => {
                    // è‡ªåŠ¨æ’­æ”¾
                    document.getElementById('audio').play();
                    this.startFlag = true;
                })
            },
            github() {
                window.open('https://github.com/Anixuil/Chirsmas2024')
            }
        }
    })
</script>

</html>